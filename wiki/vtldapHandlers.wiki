#sidebar vtldapSidebar

<wiki:toc max_depth="2" />

= Introduction =
Result handlers allow operations to be performed after results have been gathered from the LDAP.<br/>

== !SearchResultHandler ==
!SearchResultHandlers provide a programmatic interface for post processing of search results and attributes.<br/>
All search results must be processed by a handler, even if the handler is simply copying results.<br/>
By default all search results are processed by the !FqdnSearchResultHandler, which ensures that the DN of each result is fully qualified.

----
=== Code Samples ===
Perform a search and with *no* processing of results.
{{{
Ldap ldap = new Ldap(
  new LdapConfig("ldap://directory.vt.edu:389", "ou=People,dc=vt,dc=edu"));
Iterator<SearchResult> iter = ldap.search(
  "ou=People,dc=vt,dc=edu",
  new SearchFilter("sn=Fisher"),
  new String[]{"givenName", "mail"},
  (SearchResultHandler[]) null);
ldap.close();
}}}

Retrieve all attributes for a specific entry and encode any attribute values of type `byte[]` into Base64.
{{{
Ldap ldap = new Ldap(
  new LdapConfig("ldap://directory.vt.edu:389", "ou=People,dc=vt,dc=edu"));
Attributes attrs = ldap.getAttributes(
  "uid=818037,ou=People,dc=vt,dc=edu", null, new BinaryAttributeHandler());
ldap.close();
}}}

Perform a search and encode any attribute values of type `byte[]` into Base64.
{{{
Ldap ldap = new Ldap(
  new LdapConfig("ldap://directory.vt.edu:389", "ou=People,dc=vt,dc=edu"));
FqdnSearchResultHandler handler = new FqdnSearchResultHandler();
handler.setAttributeHandler(new AttributeHandler[] {new BinaryAttributeHandler()});
Iterator<SearchResult> iter = ldap.search(
  "ou=People,dc=vt,dc=edu", new SearchFilter("sn=Fisher"), (String[]) null, handler);
ldap.close();
}}}

Perform a search and include the entry DN as an attribute in the search results.<br/>
Note that search result handlers are executed in the order in which they are provided.
{{{
LdapConfig config = new LdapConfig("ldap://directory.vt.edu:389", "ou=People,dc=vt,dc=edu");
config.setSearchResultHandlers(new SearchResultHandler[]{new FqdnSearchResultHandler(), new EntryDnSearchResultHandler()});
Ldap ldap = new Ldap(config);
Iterator<SearchResult> iter = ldap.search(new SearchFilter("sn=Fisher"));
ldap.close();
}}}

== !AuthenticationResultHandler ==
!AuthenticationResultHandlers provide a programmatic interface for post processing of authentication results.<br/>
There is no default authentication result handler and this distribution does not currently provide any implementations.<br/>
Potential use cases for authentication result handlers include:
  * updating a database on success or failure
  * sending notifications after a number of authentication failures
  * storing authentication statistics

== !AuthorizationHandler ==
!AuthorizationHandlers provide a programmatic interface for performing authorization after an authentication has succeeded.<br/>
The only implementation provided by in this project is the !CompareAuthorizationHandler.<br/>
It is used by default whenever the {{{edu.vt.middleware.ldap.auth.authorizationFilter}}} property is used.<br/>
Note that implementations should throw !AuthenticationException on an authorization failure.